<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Dashboard Guru - Adaptive Learning</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background-color: #f4f4f9; }
        .container { max-width: 900px; margin: auto; background: white; padding: 20px; border-radius: 8px; shadow: 0 2px 4px rgba(0,0,0,0.1); }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background-color: #007bff; color: white; }
        .alert { color: #d9534f; font-weight: bold; }
    </style>
</head>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<div style="width: 60%; margin: auto;">
    <canvas id="emotionChart"></canvas>
</div>

<script>
    // Ambil data dari backend (logs)
    const ctx = document.getElementById('emotionChart').getContext('2d');
    const emotionChart = new Chart(ctx, {
        type: 'pie', // Grafik lingkaran untuk emosi dominan
        data: {
            labels: ['Happy', 'Neutral', 'Sad', 'Fear', 'Angry'],
            datasets: [{
                data: [12, 19, 3, 5, 2], // Data ini nantinya dikirim dari Flask
                backgroundColor: ['#4caf50', '#9e9e9e', '#2196f3', '#ff9800', '#f44336']
            }]
        }
    });
</script>

<body>
    <div class="container">
        <h1>Monitoring Emosi Siswa (Real-time)</h1>
        <p>Laporan monitoring untuk membantu guru menerapkan pembelajaran adaptif[cite: 112].</p>
        
        <table>
            <thead>
                <tr>
                    <th>Waktu</th>
                    <th>Emosi Terdeteksi</th>
                    <th>Status Math Anxiety</th>
                </tr>
            </thead>
            <tbody>
                {% for log in logs %}
                <tr>
                    <td>{{ log.timestamp }}</td>
                    <td>{{ log.emotion }}</td>
                    <td class="{{ 'alert' if log.anxiety_detected == 'True' else '' }}">
                        {{ 'Tinggi (Butuh AR)' if log.anxiety_detected == 'True' else 'Normal' }}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <br>
        <a href="/">Lihat Halaman Siswa</a>
    </div>
</body>
</html>